(this["webpackJsonpfrigo-manager-react"]=this["webpackJsonpfrigo-manager-react"]||[]).push([[0],{53:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c.n(n),r=c(25),s=c.n(r),o=c(16),i=c(8),l=c(2),d=function(){return Object(l.jsx)("header",{className:"row p-3 bg-primary",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("h1",{className:"font-weight-light text-uppercase text-center mb-0",style:{fontSize:"2rem"},children:Object(l.jsx)("a",{className:"text-light",href:"/frigo-manager-react/",children:"Frigo Manager"})})})})},j=function(){return Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)("div",{className:"text-center mb-3",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/signup",children:Object(l.jsx)("button",{type:"button",className:"btn btn-light",children:"Inscription"})})}),Object(l.jsx)("div",{className:"text-center",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/login",children:Object(l.jsx)("button",{type:"button",className:"btn btn-light",children:"Connexion"})})})]})},u=c(29),b=c(7),m=c(37),h=c(28),p=(c(49),c(56),{apiKey:"AIzaSyB-WajfF4C7P9q1hyWrEIJYsVG7Bek_FJ4",authDomain:"frigo-manager-react.firebaseapp.com",databaseURL:"https://frigo-manager-react.firebaseio.com",projectId:"frigo-manager-react",storageBucket:"frigo-manager-react.appspot.com",messagingSenderId:"652200231828",appId:"1:652200231828:web:0174b2d1aa8e5874d08581"}),O=a.a.createContext(null),x=function e(){var t=this;Object(m.a)(this,e),this.signupUser=function(e,c){return t.auth.createUserWithEmailAndPassword(e,c)},this.loginUser=function(e,c){return t.auth.signInWithEmailAndPassword(e,c)},this.signoutUser=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.user=function(e){return t.db.doc("users/".concat(e))},h.a.initializeApp(p),this.auth=h.a.auth(),this.db=h.a.firestore()},f=c(22),g=(c(52),function(){var e=Object(n.useContext)(O),t=Object(n.useState)(!1),c=Object(b.a)(t,2),a=c[0],r=c[1];Object(n.useEffect)((function(){return a&&e.signoutUser()}),[a,e]);return Object(l.jsxs)("div",{className:"form-check text-right mt-n4 mb-3",children:[Object(l.jsx)("input",{className:"form-check-input",onChange:function(e){return r(e.target.checked)},type:"checkbox",id:"deconnexion",checked:a}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:"deconnexion",children:"D\xe9connexion"})]})}),v=c(19),N=c(14),y=c(38),w=c(27),C=c(17),S=function(e){var t=e.id,c=e.name,a=e.date,r=e.recipe,s=e.opened,o=e.addProduct,i=e.modifyProduct,d=e.hideForm,j={name:c,date:a,recipe:r,opened:s},u=Object(n.useState)(j),m=Object(b.a)(u,2),h=m[0],p=m[1],O=h.name,x=h.date,f=h.recipe,g=h.opened,S=function(e){p(Object(N.a)(Object(N.a)({},h),{},Object(v.a)({},e.target.id,e.target.value)))},F=t?Object(l.jsx)("h2",{className:"mb-4",children:"Modifier un produit"}):Object(l.jsx)("h2",{className:"mb-4",children:"Ajouter un produit"}),P=Object(l.jsxs)(n.Fragment,{children:[t?Object(l.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[Object(l.jsx)(C.b,{})," Modifier"]}):Object(l.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[Object(l.jsx)(w.a,{})," Ajouter"]}),Object(l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary ml-2",onClick:d,children:[Object(l.jsx)(y.a,{})," Annuler"]})]});return Object(l.jsxs)(n.Fragment,{children:[F,Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t?i(t,O,x,f,g):o(O,x,f,g)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"name",children:"Nom"}),Object(l.jsx)("input",{className:"form-control",onChange:S,value:O,type:"text",id:"name",autoComplete:"on",maxLength:"20",placeholder:"Nom du produit",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"date",children:"DLC"}),Object(l.jsx)("input",{className:"form-control",onChange:S,value:x,type:"date",id:"date",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"recipe",children:"Recette"}),Object(l.jsx)("input",{className:"form-control",onChange:S,value:f,type:"text",id:"recipe",autoComplete:"on",maxLength:"20",placeholder:"Nom de la recette"})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"opened",children:"Entam\xe9"}),Object(l.jsxs)("select",{className:"form-control",onChange:S,id:"opened",value:g,children:[Object(l.jsx)("option",{value:"true",children:"Oui"}),Object(l.jsx)("option",{value:"false",children:"Non"})]})]}),P]})]})},F=function(){var e=new Date,t=(e.getDate()<10?0:"")+e.getDate()+"/"+(e.getMonth()+1<10?0:"")+(e.getMonth()+1);return Object(l.jsxs)("div",{className:"my-4",children:["Date d'aujourd'hui : ",Object(l.jsx)("strong",{children:t})]})},P=c(34),k=function(e){var t=e.id,c=e.name,n=e.date,a=e.recipe,r=e.opened,s=e.showForm,o=e.deleteProduct,i=n.replace(/(\d{4})-(\d{2})-(\d{2})/g,"$3/$2"),d=Math.ceil((new Date(n)-new Date)/864e5),j="".concat(d," jr").concat("true"===r?" (entam\xe9)":""),u=d<0?"black":d<2?"red":d<4?"orange":"green",b={cursor:"pointer"},m="true"===r?Object(l.jsx)(C.a,{style:b,color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"}):d<0?Object(l.jsx)(C.c,{style:b,color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"}):d<4?Object(l.jsx)(C.d,{style:b,color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"}):Object(l.jsx)(C.e,{style:b,color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"});return Object(l.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:"mr-3",children:m}),Object(l.jsx)(P.a,{id:"smileyTooltip",place:"top",effect:"solid",eventOff:"click",delayHide:1500}),Object(l.jsx)("span",{className:"mr-3",children:Object(l.jsx)("strong",{children:i})}),Object(l.jsx)("span",{className:"mr-3",children:c})]}),Object(l.jsxs)("div",{children:[a&&Object(l.jsx)(C.g,{className:"mr-3",style:b,color:"#6c757d","data-for":"recipeTooltip","data-tip":a,"data-event":"click"}),Object(l.jsx)(P.a,{id:"recipeTooltip",place:"top",effect:"solid",eventOff:"click",delayHide:1500}),Object(l.jsx)(C.b,{className:"mr-3",style:b,color:"#6c757d",onClick:function(){return s(t,c,n,a,r)}}),Object(l.jsx)(C.h,{style:b,color:"#6c757d",onClick:function(){return o(t)}})]})]})},D=function(){return Object(l.jsx)("div",{className:"h5 text-muted text-center pt-3 mb-0",children:"Chargement..."})};f.a.configure({position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1});var I=function(e){var t=Object(n.useContext)(O),c=Object(n.useState)(null),a=Object(b.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)({}),i=Object(b.a)(o,2),d=i[0],j=i[1],m=Object(n.useState)(!1),h=Object(b.a)(m,2),p=h[0],x=h[1],v=Object(n.useState)([]),N=Object(b.a)(v,2),y=N[0],P=N[1],I=Object(n.useState)(!1),E=Object(b.a)(I,2),q=E[0],M=E[1],A=Object(n.useState)({name:"",date:"",recipe:"",opened:"false"}),T=Object(b.a)(A,2),z=T[0],U=T[1],B=Object(n.useState)(1),R=Object(b.a)(B,2),L=R[0],J=R[1],W=Object(n.useState)(null),H=Object(b.a)(W,2),V=H[0],$=H[1],_=z.name,G=z.date,K=z.recipe,Y=z.opened;Object(n.useEffect)((function(){var c=t.auth.onAuthStateChanged((function(t){return t?s(t):e.history.push("/frigo-manager-react/")}));return r&&t.user(r.uid).get().then((function(e){if(e&&e.exists){var t=e.data();j(t)}})).catch((function(e){return console.log(e)})),function(){return c()}}),[r,t,e.history]),Object(n.useEffect)((function(){d.listProducts&&P(d.listProducts),d.idProduct&&J(d.idProduct),d.pseudo&&!p&&(f.a.success("Bienvenue ".concat(d.pseudo)),x(!0))}),[d]),Object(n.useEffect)((function(){r&&t.user(r.uid).update({listProducts:y,idProduct:L}).then((function(){return console.log("Donn\xe9es de l'utilisateur mises \xe0 jour")})).catch((function(e){return console.error("Erreur de mise \xe0 jour des donn\xe9es de l'utilisateur : ",e)}))}),[y]);var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"false";$(e),U({name:t,date:c,recipe:n,opened:a}),M(!0)},X=function(e){var t=y.findIndex((function(t){return t.id===e})),c=Object(u.a)(y),n=c[t].name;c.splice(t,1),P(c),f.a.success("Suppression de ".concat(n))},Z=Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-6 col-sm-8",children:Object(l.jsxs)("button",{type:"button",className:"btn btn-primary btn-block text-nowrap",onClick:function(){return Q()},children:[Object(l.jsx)(w.a,{})," Ajouter"]})}),Object(l.jsx)("div",{className:"col-6 col-sm-4 pl-0",children:Object(l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-block text-nowrap",onClick:function(){window.confirm("Supprimer tous les produits ?")&&(P([]),f.a.success("Suppression de toute la liste"))},disabled:!y.length,children:[Object(l.jsx)(C.f,{})," Tout effacer"]})})]}),ee=y.length?Object(l.jsx)("ul",{className:"list-group list-group-flush",children:y.sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(e){var t=e.id,c=e.name,n=e.date,a=e.recipe,r=e.opened;return Object(l.jsx)("li",{className:"list-group-item",children:Object(l.jsx)(k,{id:t,name:c,date:n,recipe:a,opened:r,showForm:Q,deleteProduct:X})},t)}))}):Object(l.jsx)("p",{className:"h5 text-muted text-center pt-3 mb-0",children:"Votre liste est vide !"});return r?Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)(g,{}),q?Object(l.jsx)(S,{id:V,name:_,date:G,recipe:K,opened:Y,addProduct:function(e,t,c,n){var a={id:L,name:e,date:t,recipe:c,opened:n};P([].concat(Object(u.a)(y),[a])),J(L+1),M(!1),f.a.success("Ajout de ".concat(e))},modifyProduct:function(e,t,c,n,a){var r=y.findIndex((function(t){return t.id===e})),s=Object(u.a)(y);s[r]={id:e,name:t,date:c,recipe:n,opened:a},P(s),M(!1),f.a.success("Modification de ".concat(t))},hideForm:function(){return M(!1)}}):Object(l.jsxs)(n.Fragment,{children:[Z,Object(l.jsx)(F,{}),ee]})]}):Object(l.jsx)(D,{})},E=function(e){var t=Object(n.useContext)(O),c={email:"",password:""},a=Object(n.useState)(c),r=Object(b.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(""),j=Object(b.a)(d,2),u=j[0],m=j[1],h=s.email,p=s.password,x=function(e){return i(Object(N.a)(Object(N.a)({},s),{},Object(v.a)({},e.target.id,e.target.value)))},f=!h||p.length<6?Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!0,children:"Connexion"}):Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Connexion"}),g=u&&Object(l.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:u.message});return Object(l.jsxs)(n.Fragment,{children:[g,Object(l.jsx)("h2",{className:"mb-4",children:"Connexion"}),Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t.loginUser(h,p).then((function(){i(Object(N.a)({},c)),e.history.push("/frigo-manager-react/welcome")})).catch((function(e){m(e),i(Object(N.a)({},c))}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:x,value:h,type:"email",id:"email",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(l.jsx)("input",{className:"form-control",onChange:x,value:p,type:"password",id:"password",autoComplete:"on",required:!0})]}),f]}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/signup",children:"Pas encore de compte ? Inscrivez-vous."})}),Object(l.jsx)("div",{children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/forgetpassword",children:"Mot de passe oubli\xe9 ? R\xe9cup\xe9rez-le."})})]})},q=function(e){var t=Object(n.useContext)(O),c={pseudo:"",email:"",password:"",confirmPassword:""},a=Object(n.useState)(c),r=Object(b.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(""),j=Object(b.a)(d,2),u=j[0],m=j[1],h=s.pseudo,p=s.email,x=s.password,f=s.confirmPassword,g=function(e){return i(Object(N.a)(Object(N.a)({},s),{},Object(v.a)({},e.target.id,e.target.value)))},y=h&&p&&x&&x===f?Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Inscription"}):Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!0,children:"Inscription"}),w=u&&Object(l.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:u.message});return Object(l.jsxs)(n.Fragment,{children:[w,Object(l.jsx)("h2",{className:"mb-4",children:"Inscription"}),Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t.signupUser(p,x).then((function(e){return t.user(e.user.uid).set({pseudo:h,email:p,listProducts:[],idProduct:0})})).then((function(){i(Object(N.a)({},c)),e.history.push("/frigo-manager-react/welcome")})).catch((function(e){m(e),i(Object(N.a)({},c))}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"pseudo",children:"Pseudo"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:h,type:"text",id:"pseudo",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:p,type:"email",id:"email",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:x,type:"password",id:"password",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:f,type:"password",id:"confirmPassword",autoComplete:"on",required:!0})]}),y]}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/login",children:"D\xe9j\xe0 inscrit ? Connectez-vous."})})]})},M=function(){return Object(l.jsx)("div",{children:"Oups, cette page n'existe pas !"})},A=function(e){var t=Object(n.useContext)(O),c=Object(n.useState)(""),a=Object(b.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(null),d=Object(b.a)(i,2),j=d[0],u=d[1],m=Object(n.useState)(null),h=Object(b.a)(m,2),p=h[0],x=h[1],f=j&&Object(l.jsx)("div",{className:"alert alert-success mb-4",role:"alert",children:j}),g=p&&Object(l.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:p}),v=!r;return Object(l.jsxs)("div",{children:[f,g,Object(l.jsx)("h2",{className:"mb-4",children:"Mot de passe oubli\xe9"}),Object(l.jsxs)("form",{onSubmit:function(c){c.preventDefault(),t.passwordReset(r).then((function(){s(""),x(null),u("Consultez votre email ".concat(r," pour changer le mot de passe.")),setTimeout((function(){return e.history.push("/frigo-manager-react/login")}),5e3)})).catch((function(e){s(""),x(e)}))},children:[Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:function(e){return s(e.target.value)},value:r,type:"email",id:"email",autoComplete:"on",required:!0})]}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:v,children:"R\xe9cup\xe9rer"})]}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/login",children:"D\xe9j\xe0 inscrit ? Connectez-vous."})})]})},T=c(39),z=function(){return Object(l.jsx)("footer",{className:"row p-3 bg-dark",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("p",{className:"text-light text-center mb-0",children:["Fait avec ",Object(l.jsx)(T.a,{color:"#ff002d"})," par ",Object(l.jsx)("a",{className:"font-weight-bold text-light",href:"https://github.com/Squich",target:"_blank",rel:"noopener noreferrer",children:"Squich"})]})})})},U=c(0),B=(c(53),function(){return Object(l.jsx)("div",{className:"container py-5",children:Object(l.jsx)("div",{className:"shadow rounded-lg overflow-hidden",children:Object(l.jsxs)(U.b.Provider,{value:{style:{verticalAlign:"middle"}},children:[Object(l.jsx)(d,{}),Object(l.jsx)("main",{className:"row px-3 py-5 bg-white",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/frigo-manager-react/",component:j}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/welcome",component:I}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/login",component:E}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/signup",component:q}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/forgetpassword",component:A}),Object(l.jsx)(i.a,{component:M})]})})})}),Object(l.jsx)(z,{})]})})})}),R=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,58)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(54);s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(O.Provider,{value:new x,children:Object(l.jsx)(B,{})})}),document.getElementById("root")),R()}},[[55,1,2]]]);
//# sourceMappingURL=main.c24bb7be.chunk.js.map