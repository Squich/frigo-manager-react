(this["webpackJsonpfrigo-manager-react"]=this["webpackJsonpfrigo-manager-react"]||[]).push([[0],{57:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(26),s=c.n(r),o=c(18),i=c(11),l=c(3),d=function(){return Object(l.jsx)("header",{className:"row p-3 bg-primary",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("h1",{className:"font-weight-light text-uppercase text-center",children:Object(l.jsx)("a",{className:"text-light",href:"/frigo-manager-react/",children:"Frigo Manager"})})})})},j=function(){return Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)("div",{className:"text-center mb-3",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/login",children:Object(l.jsx)("button",{type:"button",className:"btn btn-primary",children:"Connexion"})})}),Object(l.jsx)("div",{className:"text-center",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/signup",children:Object(l.jsx)("button",{type:"button",className:"btn btn-light",children:"Inscription"})})})]})},u=c(30),b=c(10),m=c(40),p=c(29),h=(c(52),c(59),{apiKey:"AIzaSyB-WajfF4C7P9q1hyWrEIJYsVG7Bek_FJ4",authDomain:"frigo-manager-react.firebaseapp.com",databaseURL:"https://frigo-manager-react.firebaseio.com",projectId:"frigo-manager-react",storageBucket:"frigo-manager-react.appspot.com",messagingSenderId:"652200231828",appId:"1:652200231828:web:0174b2d1aa8e5874d08581"}),O=a.a.createContext(null),x=function e(){var t=this;Object(m.a)(this,e),this.signupUser=function(e,c){return t.auth.createUserWithEmailAndPassword(e,c)},this.loginUser=function(e,c){return t.auth.signInWithEmailAndPassword(e,c)},this.signoutUser=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.user=function(e){return t.db.doc("users/".concat(e))},p.a.initializeApp(h),this.auth=p.a.auth(),this.db=p.a.firestore()},f=c(23),g=(c(55),c(62)),v=function(e){var t=e.userData,c=Object(n.useContext)(O),a=Object(n.useState)(!1),r=Object(b.a)(a,2),s=r[0],o=r[1];Object(n.useEffect)((function(){return s&&setTimeout((function(){return c.signoutUser()}),1e3)}),[s,c]);var i=t.pseudo?" (".concat(t.pseudo,")"):"",d=s?"D\xe9connexion...":"Connect\xe9".concat(i);return Object(l.jsx)(g.a,{className:"d-flex justify-content-end mt-n4 mb-3",children:Object(l.jsx)(g.a.Check,{onChange:function(e){return o(e.target.checked)},checked:s,type:"switch",label:d,id:"deconnexion",className:"pointer"})})},N=c(21),y=c(16),C=c(41),w=c(28),S=c(19),F=function(e){var t=e.id,c=e.name,a=e.date,r=e.recipe,s=e.opened,o=e.addProduct,i=e.modifyProduct,d=e.hideForm,j={name:c,date:a,recipe:r,opened:s},u=Object(n.useState)(j),m=Object(b.a)(u,2),p=m[0],h=m[1],O=p.name,x=p.date,f=p.recipe,g=p.opened,v=function(e){h(Object(y.a)(Object(y.a)({},p),{},Object(N.a)({},e.target.id,e.target.value)))},F=t?Object(l.jsx)("h2",{className:"mb-4",children:"Modifier un produit"}):Object(l.jsx)("h2",{className:"mb-4",children:"Ajouter un produit"}),P=Object(l.jsxs)(n.Fragment,{children:[t?Object(l.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[Object(l.jsx)(S.b,{})," Modifier"]}):Object(l.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[Object(l.jsx)(w.a,{})," Ajouter"]}),Object(l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary ml-2",onClick:d,children:[Object(l.jsx)(C.a,{})," Annuler"]})]});return Object(l.jsxs)(n.Fragment,{children:[F,Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t?i(t,O,x,f,g):o(O,x,f,g)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"name",children:"Nom"}),Object(l.jsx)("input",{className:"form-control",onChange:v,value:O,type:"text",id:"name",autoComplete:"on",maxLength:"20",placeholder:"Nom du produit",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"date",children:"DLC"}),Object(l.jsx)("input",{className:"form-control",onChange:v,value:x,type:"date",id:"date",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"recipe",children:"Recette"}),Object(l.jsx)("input",{className:"form-control",onChange:v,value:f,type:"text",id:"recipe",autoComplete:"on",maxLength:"20",placeholder:"Nom de la recette"})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"opened",children:"Entam\xe9"}),Object(l.jsxs)("select",{className:"form-control",onChange:v,id:"opened",value:g,children:[Object(l.jsx)("option",{value:"true",children:"Oui"}),Object(l.jsx)("option",{value:"false",children:"Non"})]})]}),P]})]})},P=function(){var e=new Date,t=(e.getDate()<10?0:"")+e.getDate()+"/"+(e.getMonth()+1<10?0:"")+(e.getMonth()+1);return Object(l.jsxs)("div",{className:"my-4",children:["Date d'aujourd'hui : ",Object(l.jsx)("strong",{children:t})]})},k=c(36),D=function(e){var t=e.id,c=e.name,n=e.date,a=e.recipe,r=e.opened,s=e.showForm,o=e.deleteProduct,i=n.replace(/(\d{4})-(\d{2})-(\d{2})/g,"$3/$2"),d=Math.ceil((new Date(n)-new Date)/864e5),j="".concat(d," jr").concat("true"===r?" (entam\xe9)":""),u=d<0?"black":d<2?"red":d<4?"orange":"green",b="true"===r?Object(l.jsx)(S.a,{className:"mr-3 pointer",color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"}):d<0?Object(l.jsx)(S.c,{className:"mr-3 pointer",color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"}):d<4?Object(l.jsx)(S.d,{className:"mr-3 pointer",color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"}):Object(l.jsx)(S.e,{className:"mr-3 pointer",color:u,"data-for":"smileyTooltip","data-tip":j,"data-event":"click"});return Object(l.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(l.jsxs)("div",{children:[b,Object(l.jsx)(k.a,{id:"smileyTooltip",place:"top",effect:"solid",eventOff:"click",delayHide:1500}),Object(l.jsx)("span",{className:"mr-3",children:Object(l.jsx)("strong",{children:i})}),Object(l.jsx)("span",{className:"mr-3",children:c})]}),Object(l.jsxs)("div",{children:[a&&Object(l.jsx)(S.g,{className:"mr-3 pointer",color:"#6c757d","data-for":"recipeTooltip","data-tip":a,"data-event":"click"}),Object(l.jsx)(k.a,{id:"recipeTooltip",place:"top",effect:"solid",eventOff:"click",delayHide:1500}),Object(l.jsx)(S.b,{className:"mr-3 pointer",color:"#6c757d",onClick:function(){return s(t,c,n,a,r)}}),Object(l.jsx)(S.h,{className:"pointer",color:"#6c757d",onClick:function(){return o(t)}})]})]})},I=function(){return Object(l.jsx)("div",{className:"h5 text-muted text-center pt-3 mb-0",children:"Chargement..."})};f.a.configure({position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1});var E=function(e){var t=Object(n.useContext)(O),c=Object(n.useState)(null),a=Object(b.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)({}),i=Object(b.a)(o,2),d=i[0],j=i[1],m=Object(n.useState)(!1),p=Object(b.a)(m,2),h=p[0],x=p[1],g=Object(n.useState)([]),N=Object(b.a)(g,2),y=N[0],C=N[1],k=Object(n.useState)(!1),E=Object(b.a)(k,2),q=E[0],M=E[1],T=Object(n.useState)({name:"",date:"",recipe:"",opened:"false"}),A=Object(b.a)(T,2),U=A[0],z=A[1],B=Object(n.useState)(1),R=Object(b.a)(B,2),L=R[0],J=R[1],W=Object(n.useState)(null),H=Object(b.a)(W,2),V=H[0],$=H[1],_=U.name,G=U.date,K=U.recipe,Y=U.opened;Object(n.useEffect)((function(){var c=t.auth.onAuthStateChanged((function(t){return t?s(t):e.history.push("/frigo-manager-react/")}));return r&&t.user(r.uid).get().then((function(e){if(e&&e.exists){var t=e.data();j(t)}})).catch((function(e){return console.log(e)})),function(){return c()}}),[r,t,e.history]),Object(n.useEffect)((function(){d.listProducts&&C(d.listProducts),d.idProduct&&J(d.idProduct),d.pseudo&&!h&&(f.a.success("Bienvenue ".concat(d.pseudo)),x(!0))}),[d]),Object(n.useEffect)((function(){r&&t.user(r.uid).update({listProducts:y,idProduct:L}).then((function(){return console.log("Donn\xe9es de l'utilisateur mises \xe0 jour")})).catch((function(e){return console.error("Erreur de mise \xe0 jour des donn\xe9es de l'utilisateur : ",e)}))}),[y]);var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"false";$(e),z({name:t,date:c,recipe:n,opened:a}),M(!0)},X=function(e){var t=y.findIndex((function(t){return t.id===e})),c=Object(u.a)(y),n=c[t].name;c.splice(t,1),C(c),f.a.success("Suppression de ".concat(n))},Z=Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-6 col-sm-8",children:Object(l.jsxs)("button",{type:"button",className:"btn btn-primary btn-block text-nowrap",onClick:function(){return Q()},children:[Object(l.jsx)(w.a,{})," Ajouter"]})}),Object(l.jsx)("div",{className:"col-6 col-sm-4 pl-0",children:Object(l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-block text-nowrap",onClick:function(){window.confirm("Supprimer tous les produits ?")&&(C([]),f.a.success("Suppression de toute la liste"))},disabled:!y.length,children:[Object(l.jsx)(S.f,{})," Tout effacer"]})})]}),ee=y.length?Object(l.jsx)("ul",{className:"list-group list-group-flush",children:y.sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(e){var t=e.id,c=e.name,n=e.date,a=e.recipe,r=e.opened;return Object(l.jsx)("li",{className:"list-group-item",children:Object(l.jsx)(D,{id:t,name:c,date:n,recipe:a,opened:r,showForm:Q,deleteProduct:X})},t)}))}):Object(l.jsx)("p",{className:"h5 text-muted text-center pt-3 mb-0",children:"Votre liste est vide !"});return r?Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)(v,{userData:d}),q?Object(l.jsx)(F,{id:V,name:_,date:G,recipe:K,opened:Y,addProduct:function(e,t,c,n){var a={id:L,name:e,date:t,recipe:c,opened:n};C([].concat(Object(u.a)(y),[a])),J(L+1),M(!1),f.a.success("Ajout de ".concat(e))},modifyProduct:function(e,t,c,n,a){var r=y.findIndex((function(t){return t.id===e})),s=Object(u.a)(y);s[r]={id:e,name:t,date:c,recipe:n,opened:a},C(s),M(!1),f.a.success("Modification de ".concat(t))},hideForm:function(){return M(!1)}}):Object(l.jsxs)(n.Fragment,{children:[Z,Object(l.jsx)(P,{}),ee]})]}):Object(l.jsx)(I,{})},q=function(e){var t=Object(n.useContext)(O),c={email:"",password:""},a=Object(n.useState)(c),r=Object(b.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(""),j=Object(b.a)(d,2),u=j[0],m=j[1],p=s.email,h=s.password,x=function(e){return i(Object(y.a)(Object(y.a)({},s),{},Object(N.a)({},e.target.id,e.target.value)))},f=!p||h.length<6?Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!0,children:"Connexion"}):Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Connexion"}),g=u&&Object(l.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:u.message});return Object(l.jsxs)(n.Fragment,{children:[g,Object(l.jsx)("h2",{className:"mb-4",children:"Connexion"}),Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t.loginUser(p,h).then((function(){i(Object(y.a)({},c)),e.history.push("/frigo-manager-react/welcome")})).catch((function(e){m(e),i(Object(y.a)({},c))}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:x,value:p,type:"email",id:"email",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(l.jsx)("input",{className:"form-control",onChange:x,value:h,type:"password",id:"password",autoComplete:"on",required:!0})]}),f]}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/signup",children:"Pas encore de compte ? Inscrivez-vous."})}),Object(l.jsx)("div",{children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/forgetpassword",children:"Mot de passe oubli\xe9 ? R\xe9cup\xe9rez-le."})})]})},M=function(e){var t=Object(n.useContext)(O),c={pseudo:"",email:"",password:"",confirmPassword:""},a=Object(n.useState)(c),r=Object(b.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(""),j=Object(b.a)(d,2),u=j[0],m=j[1],p=s.pseudo,h=s.email,x=s.password,f=s.confirmPassword,g=function(e){return i(Object(y.a)(Object(y.a)({},s),{},Object(N.a)({},e.target.id,e.target.value)))},v=p&&h&&x&&x===f?Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Inscription"}):Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!0,children:"Inscription"}),C=u&&Object(l.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:u.message});return Object(l.jsxs)(n.Fragment,{children:[C,Object(l.jsx)("h2",{className:"mb-4",children:"Inscription"}),Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t.signupUser(h,x).then((function(e){return t.user(e.user.uid).set({pseudo:p,email:h,listProducts:[],idProduct:0})})).then((function(){i(Object(y.a)({},c)),e.history.push("/frigo-manager-react/welcome")})).catch((function(e){m(e),i(Object(y.a)({},c))}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"pseudo",children:"Pseudo"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:p,type:"text",id:"pseudo",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:h,type:"email",id:"email",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:x,type:"password",id:"password",autoComplete:"on",required:!0})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),Object(l.jsx)("input",{className:"form-control",onChange:g,value:f,type:"password",id:"confirmPassword",autoComplete:"on",required:!0})]}),v]}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/login",children:"D\xe9j\xe0 inscrit ? Connectez-vous."})})]})},T=function(){return Object(l.jsx)("div",{children:"Oups, cette page n'existe pas !"})},A=function(e){var t=Object(n.useContext)(O),c=Object(n.useState)(""),a=Object(b.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(null),d=Object(b.a)(i,2),j=d[0],u=d[1],m=Object(n.useState)(null),p=Object(b.a)(m,2),h=p[0],x=p[1],f=j&&Object(l.jsx)("div",{className:"alert alert-success mb-4",role:"alert",children:j}),g=h&&Object(l.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:h}),v=!r;return Object(l.jsxs)("div",{children:[f,g,Object(l.jsx)("h2",{className:"mb-4",children:"Mot de passe oubli\xe9"}),Object(l.jsxs)("form",{onSubmit:function(c){c.preventDefault(),t.passwordReset(r).then((function(){s(""),x(null),u("Consultez votre email ".concat(r," pour changer le mot de passe.")),setTimeout((function(){return e.history.push("/frigo-manager-react/login")}),5e3)})).catch((function(e){s(""),x(e)}))},children:[Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:function(e){return s(e.target.value)},value:r,type:"email",id:"email",autoComplete:"on",required:!0})]}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:v,children:"R\xe9cup\xe9rer"})]}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)(o.b,{to:"/frigo-manager-react/login",children:"D\xe9j\xe0 inscrit ? Connectez-vous."})})]})},U=c(42),z=function(){return Object(l.jsx)("footer",{className:"row p-3 bg-dark",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("p",{className:"text-light text-center mb-0",children:["Fait avec ",Object(l.jsx)(U.a,{color:"#ff002d"})," par ",Object(l.jsx)("a",{className:"font-weight-bold text-light",href:"https://github.com/Squich",target:"_blank",rel:"noopener noreferrer",children:"Squich"})]})})})},B=c(0),R=function(){return Object(l.jsx)("div",{className:"container py-5",children:Object(l.jsx)("div",{className:"shadow rounded-lg overflow-hidden",children:Object(l.jsxs)(B.b.Provider,{value:{style:{verticalAlign:"middle"}},children:[Object(l.jsx)(d,{}),Object(l.jsx)("main",{className:"row px-3 py-5 bg-white",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/frigo-manager-react/",component:j}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/welcome",component:E}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/login",component:q}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/signup",component:M}),Object(l.jsx)(i.a,{path:"/frigo-manager-react/forgetpassword",component:A}),Object(l.jsx)(i.a,{component:T})]})})})}),Object(l.jsx)(z,{})]})})})},L=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,63)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(57);s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(O.Provider,{value:new x,children:Object(l.jsx)(R,{})})}),document.getElementById("root")),L()}},[[58,1,2]]]);
//# sourceMappingURL=main.e5a7fc4a.chunk.js.map